<p style="color: green"><%= notice %></p>

<% content_for :title, "Tasks" %>

<h1>Tasks</h1>

<div id="tasks">
    <% @tasks.each do |task| %>
    <%= render task %>
    <p>
        <%= link_to "Show this task", task %>
    </p>
    <% end %>
</div>

<%= link_to "New task", new_task_path %>

<%= form_with url: tasks_path, method: :get, local: true do %>
<div>
    <%= label_tag :status, "ステータス" %>
    <%=select_tag :status,
          options_for_select(
           Task.statuses.keys.map {|k| [t("activerecord.attributes.task.statuses.#{k}"), k ]},
           params[:status]
          ),
          include_blank: "すべて" %>
</div>

<div>
    <%= label_tag :sort, "並び替え" %>
    <%= select_tag :sort,
        options_for_select(
          [
            ["期限が早い順", "due_on_asc"],
            ["優先度が高い順", "priority_desc"],
            ["作成日が新しい順", "created_at_desc"]
          ],
          params[:sort]
        ) %>
</div>

<%= submit_tag "適用" %>
<% end %>